{"version":3,"names":[],"mappings":"","sources":["login/login.ts"],"sourcesContent":["//our root app component\r\nimport {Component} from '@angular/core';\r\nimport { Router, ActivatedRoute, Params } from '@angular/router';\r\nimport {AuthenticationService} from '../common/services/authentication-service';\r\nimport { SpinnerService } from '../common/services/spinner-service';\r\nimport {Constants } from '../common/constants';\r\nimport {ParticipantService} from \"../common/services/participant-service\";\r\n\r\n@Component({\r\n    templateUrl: 'app/login/login.tmpl.html'\r\n})\r\nexport class LoginComponent {\r\n    email: string;\r\n    password: string;\r\n    message: string;\r\n    coachImage: string;\r\n    erroMsgShow: boolean;\r\n\r\n    constructor(private router: Router,\r\n                private route: ActivatedRoute,\r\n                private authenticationService: AuthenticationService,\r\n                private spinnerService: SpinnerService,\r\n                private constants: Constants,\r\n                private participantService: ParticipantService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.erroMsgShow = false;\r\n        if (this.route.snapshot.queryParams[\"t\"]) { \r\n            let token = this.route.snapshot.queryParams['t']; // (+) converts string 'id' to a number\r\n            console.log(\"token = \" + token);\r\n            this.router.navigate(['/invite'], { queryParams: { t: token } });\r\n        }\r\n    }\r\n\r\n    onLogin(ev) {\r\n        this.spinnerService.postStatus(\"Logging in\");\r\n        this.authenticationService.Login(this.email, this.password).subscribe(\r\n            res => {\r\n                if (res.success) {\r\n                    console.log(\"Success: \" + res.success +\r\n                        \", token: \" + res.token +\r\n                        \", email: \" + res.user.email + \r\n                        \", registrationStatus: \" + res.user.registrationStatus);\r\n                    \r\n                    this.participantService.ParticipantContext.registrationStatus = res.user.registrationStatus;\r\n                    switch (res.user.registrationStatus) {\r\n                        case this.constants.RegistrationStatus_Contact:\r\n                            console.log(\"route to Contact\");\r\n                            this.router.navigate(['accountSetup/accountContactInformation']);\r\n                            break;\r\n                        case this.constants.RegistrationStatus_Insurance:\r\n                            console.log(\"route to Insurance\");\r\n                            this.router.navigate(['accountSetup/accountInsuranceDetails']);\r\n                            break;\r\n                        case this.constants.RegistrationStatus_Terms:\r\n                            console.log(\"route to Terms & Cond\");\r\n                            this.router.navigate(['accountSetup/accountTermsConditions']);\r\n                            break;\r\n                        case this.constants.RegistrationStatus_Dash:\r\n                            this.router.navigate(['dashboard']);\r\n                            break;\r\n                        default:\r\n                            this.router.navigate(['dashboard']);\r\n                            //break;\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    this.erroMsgShow = true;\r\n                    //this.message = \"Looks like your email or password are incorrect. Please try again or sign up for LAZ Health.\"; //res.responseMessage //coming soon fancy message service\r\n                }\r\n            },\r\n            error => { }, //already logged in service\r\n            () => { this.spinnerService.finishCurrentStatus(); }\r\n        );\r\n    \r\n    }\r\n\r\n\r\n    \r\n}"],"file":"login/login.ts","sourceRoot":"/source/"}
